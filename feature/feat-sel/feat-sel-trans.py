import sys
from sklearn.ensemble import ExtraTreesClassifier
from sklearn.metrics import roc_auc_score,mean_absolute_error,r2_score,mean_squared_error
import numpy as np
import pickle

pf=open('feat-sel.pkl','r')
clf = pickle.load(pf)
pf.close()

X=[]
L=[]
testf=open(sys.argv[1])
for l in testf.readlines():
    sl = l.strip().split()
    L.append(sl[0])
    xx=map(float,sl[1:])
    #xx=map(float,sl[10:])
    X.append(xx)

print len(X), len(X[0])
XX=clf.transform(X)
print XX.shape

with open(sys.argv[2],'w') as mf:
    for l in xrange(0, len(L)):
        mf.write('%s %s\n'%(L[l], ' '.join([str(xx) for xx in XX[l]])))

